import { useNavigate } from "react-router";
import styles from "./Navbar.module.css";
import { useAuth } from "../context/AuthContext";

export default function Navbar() {
  const navigate = useNavigate();
  const { user, loading, logout } = useAuth();

  if (loading) {
    return null;
  }

  return (
    <nav className={styles.navbar}>
      <div className={styles.logo} onClick={() => navigate("/")}>
        <p>Uploader</p>
      </div>
      <div className={styles.navbarbuttons}>
        {user ? (
          <>
            <p className={styles.username}>{user.user.username}</p>
            <svg
              width="40"
              height="40"
              viewBox="0 0 40 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={styles.logout}
              onClick={logout}
            >
              <g clipPath="url(#clip0_2026_9)">
                <path
                  d="M26.7737 20.4111C26.4259 20.1585 25.8462 20.4937 25.8869 20.9199C26.0262 22.3846 26.2685 23.7315 26.2211 25.2297C26.1675 26.9302 25.9941 28.627 25.9593 30.3279C22.7875 30.4233 19.624 30.1392 16.4527 30.1372C16.5697 23.2756 16.5705 16.395 16.5694 9.55796C16.5694 9.031 16.0438 8.85228 15.6718 9.00986C15.6703 9.00794 15.6699 9.0058 15.6684 9.00388C14.2733 7.262 11.1995 6.35306 9.25604 5.34098C7.06022 4.19738 4.91522 2.91115 3.06744 1.26087C6.40408 1.49275 9.71254 1.97231 13.0481 2.21636C17.3499 2.53152 21.6275 1.74833 25.9205 2.31223C26.0311 3.68686 25.9984 5.05124 25.9175 6.42843C25.843 7.69587 25.6098 9.13818 26.1073 10.3367C26.3721 10.9747 27.1905 10.8591 27.2791 10.178C27.4604 8.78396 27.3199 7.28656 27.3929 5.87093C27.4572 4.62463 27.4367 3.40907 27.0861 2.21466C27.4821 1.87687 27.5135 1.15369 26.8678 1.0354C23.0422 0.334418 19.1537 0.731775 15.2915 0.817609C10.8762 0.915613 6.50614 -0.354391 2.09935 0.162109C2.06412 0.166166 2.03807 0.181326 2.00668 0.19008C1.80875 -0.0345409 1.40563 -0.0264272 1.2536 0.349791C-0.728695 5.26433 0.169788 11.0178 0.424728 16.1693C0.678601 21.2946 -0.0945471 26.5672 1.16628 31.5996C1.23759 31.8838 1.44257 31.9916 1.65246 31.982C5.11571 35.8192 10.6008 37.3774 14.9898 39.8717C15.2845 40.0391 15.5606 39.9554 15.7448 39.7731C15.9774 39.7793 16.2058 39.6281 16.2178 39.3068C16.3179 36.6149 16.3858 33.9146 16.4371 31.2117C19.8403 31.6442 23.247 31.9067 26.6819 31.7809C27.0942 31.7657 27.4057 31.4563 27.4191 31.0434C27.4909 28.9155 27.7025 26.7957 27.7424 24.6665C27.7672 23.3867 27.9495 21.2643 26.7737 20.4111ZM7.29168 5.70567C9.65382 7.06685 12.5654 9.10936 15.1901 9.8255C15.2322 9.83703 15.2698 9.83639 15.3082 9.83852C15.3052 10.2335 15.2935 10.6317 15.2841 11.0289C13.6964 9.33804 11.356 8.23607 9.36258 7.16912C6.78115 5.78724 4.20592 4.53517 1.84548 2.78197C1.88711 2.38419 1.9264 1.98683 1.98106 1.58734C3.35291 3.37918 5.32838 4.57445 7.29168 5.70567ZM1.56385 10.9403C6.14295 12.9676 10.6339 15.0033 14.683 17.9985C14.8229 18.1021 14.9734 18.0856 15.0977 18.0126C15.0742 18.6566 15.0503 19.3006 15.0266 19.9452C10.5594 17.3078 5.96466 14.9136 1.58947 12.1067C1.57943 11.7171 1.57111 11.3287 1.56385 10.9403ZM1.60441 12.6809C5.85812 15.6573 10.2967 18.6455 14.9922 20.8763C14.9828 21.1377 14.9728 21.3986 14.9634 21.6601C10.781 18.7484 6.37974 16.1384 1.77544 13.9498C1.7274 13.927 1.68171 13.9289 1.64114 13.9417C1.62833 13.5202 1.61616 13.1002 1.60441 12.6809ZM1.70818 16.1685C1.69068 15.5382 1.67125 14.9115 1.65182 14.287C6.18565 16.7507 10.4436 19.6093 14.6832 22.5433C14.7695 22.6028 14.8523 22.6169 14.9311 22.6129C14.9168 23.0395 14.9002 23.4657 14.8874 23.8923C10.5752 21.2739 6.10195 18.9019 1.7116 16.4174C1.70946 16.3342 1.71011 16.2515 1.70818 16.1685ZM1.71801 16.8618C6.0663 19.5662 10.3266 22.4734 14.8573 24.8642C14.8519 25.0653 14.8434 25.2667 14.8387 25.4678C10.494 23.0997 5.97555 21.1227 1.74256 18.5362C1.73957 17.9789 1.72868 17.4201 1.71801 16.8618ZM1.74576 20.2144C1.7464 19.8017 1.74448 19.3885 1.7432 18.9756C5.76502 21.9102 10.2822 24.3686 14.8137 26.3981C14.8103 26.5661 14.803 26.7346 14.8002 26.9027C10.7626 24.128 5.79321 23.0207 1.74576 20.2144ZM14.7896 27.8455C14.7853 28.2282 14.7778 28.6112 14.7765 28.9936C10.842 26.1893 6.03042 24.4611 1.79936 22.1724C1.78014 22.1619 1.76178 22.1596 1.7432 22.1549C1.74363 21.6687 1.74405 21.1812 1.74512 20.6948C5.64118 23.7676 10.6138 25.18 14.7896 27.8455ZM1.74256 22.6571C5.99327 25.1358 10.3796 27.5744 14.7821 29.7672C14.7836 30.4283 14.7842 31.0891 14.7968 31.7489C11.1083 28.5399 5.95548 27.3895 1.76156 24.9564C1.74768 24.1903 1.74363 23.4238 1.74256 22.6571ZM1.82178 27.0788C1.79423 26.5089 1.78654 25.939 1.77352 25.369C5.9273 28.175 10.9362 29.5238 14.8295 32.7236C14.8483 33.3737 14.8617 34.0248 14.8942 34.673C13.3618 33.1863 10.6996 32.2263 8.95412 31.2979C7.48384 30.516 6.01035 29.739 4.55288 28.9338C4.02101 28.6398 1.94348 27.7665 1.82242 27.0794C1.82242 27.0794 1.82178 27.0792 1.82178 27.0788ZM1.8743 27.9807C2.83577 29.0812 5.49642 30.2717 6.02914 30.5779C8.96864 32.2675 11.944 34.095 14.9461 35.6515C14.9772 36.1578 15.0116 36.6632 15.0526 37.1682C12.2671 35.5715 9.48557 33.8853 6.85781 32.0521C5.55812 31.1455 3.70351 29.2123 1.95138 29.0722C1.91957 28.7079 1.89779 28.3443 1.8743 27.9807ZM2.20248 31.3949C2.20226 31.3667 2.21016 31.3419 2.20589 31.3122C2.12732 30.7763 2.06732 30.2401 2.01202 29.7046C6.1675 32.7505 10.5931 35.6144 15.1301 38.054C15.1429 38.1911 15.1523 38.3288 15.1662 38.4659C10.8801 35.9945 6.28366 34.2492 2.20248 31.3949ZM15.1263 17.2215C11.2605 13.9317 6.25312 12.2323 1.55701 10.4808C1.54484 9.67838 1.54292 8.87769 1.55103 8.07721C5.33393 11.53 10.4767 13.4939 15.1841 15.3868C15.1647 15.9987 15.1481 16.609 15.1263 17.2215ZM15.2153 14.4078C10.589 12.281 5.61834 10.8564 1.64584 7.53232C1.61979 7.51054 1.59224 7.49687 1.56449 7.48726C1.57623 6.83732 1.60057 6.18673 1.63196 5.53571C4.07332 7.31602 6.68016 8.80723 9.33654 10.2478C9.99908 10.6072 14.1099 13.0579 15.2418 13.0959C15.2309 13.5341 15.2281 13.9692 15.2153 14.4078ZM12.5071 10.9492C8.76025 9.42579 4.99166 7.3156 1.65972 5.01024C1.6926 4.44165 1.73381 3.87198 1.78633 3.30125C3.79852 4.85224 5.99007 6.13676 8.17436 7.43004C10.6176 8.87641 12.8602 10.5954 15.2627 12.0728C15.2625 12.0781 15.2625 12.0834 15.2623 12.0888C14.4206 11.5599 13.2691 11.2588 12.5071 10.9492Z"
                  fill="black"
                />
                <path
                  d="M39.8578 14.337C39.8581 14.2804 39.8478 14.2213 39.8245 14.1604C39.2591 12.6854 37.3919 11.6791 36.1211 10.8665C34.4174 9.7771 32.5946 8.8816 30.7124 8.14518C30.468 8.04952 30.3021 8.2071 30.2553 8.40653C30.02 8.45158 29.8108 8.60019 29.7587 8.86474C29.568 9.83261 29.6519 10.9777 29.7824 12.0314C28.9862 11.876 28.0394 11.9475 27.471 11.942C25.3689 11.9215 23.1917 11.987 21.105 12.2554C20.8296 12.2908 20.6733 12.5552 20.7219 12.7732C20.7132 12.8031 20.7 12.8289 20.6963 12.8633C20.593 13.8273 20.521 14.7941 20.5163 15.7641C20.5136 16.3769 20.4593 17.1971 20.7809 17.7548C20.7143 17.8088 20.6408 17.8532 20.5817 17.9179C20.5236 17.9819 20.5217 18.074 20.5817 18.1376C21.5406 19.1561 23.4195 18.6362 24.6878 18.5597C26.4726 18.4519 28.3949 18.4476 30.1714 18.1056C30.0777 18.5704 30.1193 19.1051 30.0875 19.5539C30.039 20.2405 29.9638 20.9251 29.9246 21.613C29.881 22.3736 30.8959 22.4752 31.2065 21.9267C31.2142 21.9265 31.2198 21.9303 31.2274 21.9299C34.9977 21.6995 37.9454 17.9587 39.8805 15.0713C40.0658 14.7946 40.0173 14.527 39.8578 14.337ZM34.9873 11.7767C36.2639 12.568 37.346 13.7133 38.5804 14.5287C38.4659 14.6942 38.3378 14.865 38.2182 15.0331C35.8078 13.5019 33.5798 11.7041 31.1373 10.2253C31.1378 9.92144 31.1288 9.6208 31.097 9.33149C32.3687 10.1847 33.6861 10.9702 34.9873 11.7767ZM21.9001 17.2741C21.9221 16.928 21.8683 16.5625 21.8237 16.2102C22.1171 16.4534 22.4038 16.7045 22.704 16.9391C22.8078 17.0203 22.9156 17.1063 23.0226 17.1913C22.6406 17.1951 22.258 17.2099 21.9001 17.2741ZM24.688 17.1785C24.4976 17.1917 24.2909 17.1939 24.0776 17.1934C23.8045 17.023 23.5265 16.858 23.2681 16.6765C22.7502 16.3122 22.2527 15.92 21.759 15.5233C21.7137 14.8682 21.6478 14.2138 21.5807 13.56C22.8001 14.8556 24.2262 16.1171 25.7136 17.0865C25.3689 17.1217 25.026 17.155 24.688 17.1785ZM26.674 16.9833C26.6599 16.9675 26.6498 16.95 26.6313 16.9361C24.9782 15.674 23.2927 14.514 21.6905 13.1889C22.1226 13.2651 22.5678 13.3016 23.0162 13.3241C23.809 14.0526 24.6086 14.7726 25.4326 15.4661C25.9399 15.8931 26.5802 16.5375 27.2511 16.9227C27.0587 16.943 26.8659 16.9622 26.674 16.9833ZM28.3061 16.8287C28.304 16.8262 28.3048 16.8236 28.3025 16.8213C27.7048 16.1643 26.7525 15.7078 26.0349 15.1834C25.2233 14.5904 24.4335 13.9674 23.645 13.3437C24.0317 13.3488 24.4182 13.3433 24.8006 13.336C24.8106 13.3727 24.8281 13.409 24.864 13.4426C26.1267 14.625 27.4606 15.7242 28.8102 16.805C28.6424 16.814 28.475 16.8161 28.3061 16.8287ZM31.3611 20.693C31.3929 20.131 31.4096 19.4266 31.34 18.8213C31.8797 19.2522 32.4165 19.6871 32.9484 20.1274C32.4426 20.3763 31.9148 20.5717 31.3611 20.693ZM33.6613 19.7319C32.8703 18.9699 32.0247 18.2775 31.1561 17.6145C31.2563 17.2827 31.0323 16.8535 30.6076 16.8151C30.427 16.7986 30.2421 16.8023 30.0597 16.7956C28.5064 15.6636 26.9216 14.5708 25.4539 13.3241C25.6649 13.3196 25.8795 13.3142 26.0851 13.3117C26.4517 13.307 26.8181 13.3091 27.1843 13.3132C29.2379 15.5478 31.6797 17.5641 34.0371 19.4744C33.912 19.5607 33.7899 19.6525 33.6613 19.7319ZM34.5891 19.0713C32.6749 16.8904 30.0898 15.3057 27.9401 13.3302C28.2017 13.3377 28.463 13.3424 28.725 13.355C29.1772 13.3766 29.6577 13.528 30.1219 13.5807C31.1773 14.2544 32.1834 14.9908 33.1555 15.7934C33.6966 16.2403 34.2203 16.7094 34.7385 17.1827C35.0556 17.4725 35.3618 17.8677 35.7754 18.0071C35.3975 18.3863 35.0029 18.7453 34.5891 19.0713ZM36.1608 17.6053C35.8497 16.6872 34.2741 15.7601 33.5862 15.2348C32.7652 14.6079 31.8962 13.9403 30.9584 13.4376C31.1013 13.3166 31.1841 13.1366 31.1096 12.9314C31.0688 12.8191 31.0082 12.723 30.9398 12.6344C30.9546 12.5266 30.9676 12.4121 30.9819 12.3017C31.8155 13.1214 32.6717 13.9219 33.5249 14.7188C34.3373 15.4774 35.4079 16.767 36.5366 17.0115C36.6087 17.0271 36.6768 17 36.7328 16.9586C36.5466 17.1772 36.3574 17.3946 36.1608 17.6053ZM36.7986 16.6716C36.1625 15.7052 34.8579 15.0237 33.9763 14.268C32.9935 13.4259 32.0557 12.5227 31.0536 11.7028C31.0842 11.4122 31.1057 11.1176 31.1213 10.8233C33.3579 12.4072 35.4406 14.2057 37.7357 15.705C37.4387 16.1004 37.1272 16.4961 36.8005 16.8825C36.8353 16.82 36.8475 16.7459 36.7986 16.6716Z"
                  fill="black"
                />
              </g>
              <defs>
                <clipPath id="clip0_2026_9">
                  <rect width="40" height="40" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </>
        ) : (
          <>
            <button
              onClick={() => navigate("/login")}
              className={`${styles.navbarbutton}`}
            >
              Login
            </button>
            <button
              onClick={() => navigate("/signup")}
              className={`${styles.navbarbutton}`}
            >
              Signup
            </button>
          </>
        )}
      </div>
    </nav>
  );
}
